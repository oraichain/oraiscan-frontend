(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{108:function(e,t){},110:function(e,t){},125:function(e,t){},128:function(e,t){},161:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(73),o=a.n(s),c=(a(84),a(85),a(38)),i=a(2),l=a.n(i),u=a(5),m=a(7);function d(){return r.a.createElement("nav",{className:"navbar mt-3"},r.a.createElement("p",{className:"navbar-brand font-weight-bold mb-0",style:{color:"#325fea"}},r.a.createElement("span",{role:"img","aria-label":"dollar-bag"},"\ud83d\udcb0")," ","Oraichain MultiSig Wallet"),r.a.createElement("hr",{className:"border-primary border w-100 border-4"}))}var p=a(25),f=a.n(p);function v(e){var t=e.approvers,a=e.quorum;return r.a.createElement("div",{className:"w-100"},r.a.createElement("h5",{className:"mt-3"},"Approvers Address"),r.a.createElement("table",{className:"my-3 table table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Address"),r.a.createElement("th",null,"Weight"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null," ",e.addr),r.a.createElement("td",null,e.weight))})))),r.a.createElement("div",{className:"mt-3 font-italic"},"Quorum:"," ",r.a.createElement("span",{className:"font-weight-bold"},r.a.createElement(f.a,{src:a,name:!1,displayObjectSize:!1,displayDataTypes:!1,displayArrayKey:!1}))))}var E=a(74),h=a(75),b=a(35),g=a.n(b),_=a(36),O=a(3),x=a(76);function y(){var e=navigator.userAgent||navigator.vendor;return console.log(e),/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"unknown"}"iOS"===y()||y(),new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig");var w=g.a.message,T=new(function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Simulate";Object(E.a)(this,e),this.requestGetChildKey=function(){var e;e=JSON.stringify({type:"Login"}),window.ReactNativeWebView.postMessage(e)},this.cosmos=new g.a(t.replace(/\/$/,""),a),this.cosmos.setBech32MainPrefix("orai")}return Object(h.a)(e,[{key:"query",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.Buffer.from(JSON.stringify(a)).toString("base64"),e.abrupt("return",this.cosmos.get("/wasm/v1beta1/contract/".concat(t,"/smart/").concat(n)));case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"execute",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,s,o,c,i,u,m,d,p,f,v,E=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=E.length>2&&void 0!==E[2]?E[2]:{},r=n.gas,s=n.fees,o=n.funds,c=n.memo,i=n.mode,u=void 0===i?"BROADCAST_MODE_SYNC":i,m=O.Buffer.from(JSON.stringify(a)),e.next=4,this.getChildKey();case 4:if(d=e.sent,"Simulate"!==this.cosmos.chainId){e.next=7;break}return e.abrupt("return",this.cosmos.get("/wasm/contract/".concat(t,"/handle/").concat(m.toString("base64"),"?account=").concat(d)));case 7:if("string"!==typeof d){e.next=13;break}return e.next=10,this.getChildKey(d);case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=d;case 14:if(p=e.t0){e.next=17;break}return e.abrupt("return");case 17:return f=this.cosmos.getAddress(p),v=this.getHandleMessage(t,m,f,o,c),e.abrupt("return",this.cosmos.submit(p,v,u,s||0,r||2e5));case 20:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getChildKey",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,s,o,c,i,u,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.Wallet){e.next=13;break}if(!(null===(n=window)||void 0===n||null===(r=n.ReactNativeWebView)||void 0===r?void 0:r.postMessage)){e.next=7;break}return e.next=4,window.Wasm.getChildKeyFromMobile();case 4:s=e.sent,e.next=10;break;case 7:return e.next=9,window.Wallet.getChildKey(t);case 9:s=e.sent;case 10:return c=(o=s||{}).privateKey,i=o.chainCode,u=o.network,m=Object(_.fromPrivateKey)(O.Buffer.from(c),O.Buffer.from(i),u),e.abrupt("return",m);case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getChildKeyFromMobile",value:function(){return new Promise((function(e,t){var a=document;"iOS"===y()&&(a=window),a.addEventListener("message",(function(t){var a=JSON.parse(null===t||void 0===t?void 0:t.data)||{},n=a.payload,r=a.type;if("cancel"!==r){if("childKey"===r&&n){var s=JSON.parse(n),o=window.Wasm.formatChildKeyFromMobile(s);e(o)}}else e(null)})),window.Wasm.requestGetChildKey()}))}},{key:"formatChildKeyFromMobile",value:function(e){var t=e.privateKey,a=e.chainCode,n=e.network;return Object(_.fromPrivateKey)(O.Buffer.from(t.data),O.Buffer.from(a.data),n)}},{key:"getAddress",value:function(e){return this.cosmos.getAddress(e)}},{key:"contractAddresses",get:function(){return{marketplace:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GROUP_ADDRESS:"orai1hg78f3elah892s8q79trjmj49se34xnthdve7t",REACT_APP_MULTISIG_ADDRESS:"orai1gkr56hlnx9vc7vncln2dkd896zfsqjn300kfq0",REACT_APP_LCD:"https://lcd.orai.io",REACT_APP_NETWORK:"Oraichain",REACT_APP_WALLET_URL:"https://api.wallet.orai.io"}).REACT_APP_MARKET_PLACE_CONTRACT,ow721:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GROUP_ADDRESS:"orai1hg78f3elah892s8q79trjmj49se34xnthdve7t",REACT_APP_MULTISIG_ADDRESS:"orai1gkr56hlnx9vc7vncln2dkd896zfsqjn300kfq0",REACT_APP_LCD:"https://lcd.orai.io",REACT_APP_NETWORK:"Oraichain",REACT_APP_WALLET_URL:"https://api.wallet.orai.io"}).REACT_APP_NFT_TOKEN_CONTRACT,lock:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GROUP_ADDRESS:"orai1hg78f3elah892s8q79trjmj49se34xnthdve7t",REACT_APP_MULTISIG_ADDRESS:"orai1gkr56hlnx9vc7vncln2dkd896zfsqjn300kfq0",REACT_APP_LCD:"https://lcd.orai.io",REACT_APP_NETWORK:"Oraichain",REACT_APP_WALLET_URL:"https://api.wallet.orai.io"}).REACT_APP_LOCK_CONTRACT_ADDR,auction:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GROUP_ADDRESS:"orai1hg78f3elah892s8q79trjmj49se34xnthdve7t",REACT_APP_MULTISIG_ADDRESS:"orai1gkr56hlnx9vc7vncln2dkd896zfsqjn300kfq0",REACT_APP_LCD:"https://lcd.orai.io",REACT_APP_NETWORK:"Oraichain",REACT_APP_WALLET_URL:"https://api.wallet.orai.io"}).REACT_APP_AUCTION_CONTRACT}}},{key:"statusCode",get:function(){var e=this.cosmos.statusCode;return console.log("status code: ",e),{SUCCESS:e.SUCCESS,NOT_FOUND:e.NOT_FOUND,GENERIC_ERROR:e.GENERIC_ERROR}}},{key:"getSignedData",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getChildKey();case 2:if("string"!==typeof(a=e.sent)){e.next=9;break}return e.next=6,this.getChildKey(a);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=a;case 10:if(n=e.t0){e.next=13;break}return e.abrupt("return");case 13:return r=O.Buffer.from(x.sha256.digest(t)),s=O.Buffer.from(this.cosmos.signRaw(r,n.privateKey)),e.abrupt("return",{signature:s.toString("base64"),publicKey:n.publicKey.toString("base64")});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getHandleMessage",value:function(e,t,a,n,r){var s=n?[{denom:this.cosmos.bech32MainPrefix,amount:n}]:null,o=new w.cosmwasm.wasm.v1beta1.MsgExecuteContract({contract:e,msg:t,sender:a,sent_funds:s}),c=new w.google.protobuf.Any({type_url:"/cosmwasm.wasm.v1beta1.MsgExecuteContract",value:w.cosmwasm.wasm.v1beta1.MsgExecuteContract.encode(o).finish()});return new w.cosmos.tx.v1beta1.TxBody({messages:[c],memo:r})}},{key:"getSendMessage",value:function(e,t,a,n){var r=new w.cosmos.bank.v1beta1.MsgSend({from_address:e,to_address:a,amount:[{denom:this.cosmos.bech32MainPrefix,amount:n.toString()}]}),s=new w.google.protobuf.Any({type_url:"/cosmos.bank.v1beta1.MsgSend",value:w.cosmos.bank.v1beta1.MsgSend.encode(r).finish()});return new w.cosmos.tx.v1beta1.TxBody({messages:[s],memo:t})}},{key:"encodeTxBody",value:function(e){return w.cosmos.tx.v1beta1.TxBody.encode(e).finish()}}]),e}())(("https://lcd.orai.io","https://lcd.orai.io"),"Oraichain"),S=new window.Keystation({keystationUrl:"https://api.wallet.orai.io",lcd:"https://lcd.orai.io"});function k(e){var t=e.id,a=Object(n.useState)(!0),s=Object(m.a)(a,2),o=s[0],c=s[1],i=Object(n.useState)([]),d=Object(m.a)(i,2),p=d[0],v=d[1];return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.query("orai1gkr56hlnx9vc7vncln2dkd896zfsqjn300kfq0",{list_votes:{proposal_id:t}});case 2:a=e.sent,n=a.data,v(null===n||void 0===n?void 0:n.votes),c(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),!0===o?r.a.createElement("div",{className:"container text-center"},"Loading..."):r.a.createElement(f.a,{src:p,name:!1,collapsed:!0,displayObjectSize:!1,displayDataTypes:!1,displayArrayKey:!1})}window.Wallet=S,window.Wasm=T;var A=function(e){var t=e.status,a=e.id,n=e.handler;switch(t){case"open":return r.a.createElement("button",{className:"btn btn-info",onClick:function(){return null===n||void 0===n?void 0:n({type:"vote",id:a})}},"Vote");case"passed":return r.a.createElement("button",{className:"btn btn-warning",onClick:function(){return null===n||void 0===n?void 0:n({type:"execute",id:a})}},"Execute");default:return null}};function C(e){var t=e.transfers,a=e.nextTransfers,n=e.approveTransfer;return r.a.createElement("div",{className:"mt-3 w-100"},r.a.createElement("h5",{className:"text-center mt-3"},"Transfers - Approvals"),r.a.createElement("table",{className:"my-3 table table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Id"),r.a.createElement("th",null,"Amount"),r.a.createElement("th",null,"To"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,t.map((function(e){var t,a=e.id,s=e.msgs,o=e.status,c=null===(t=s[0])||void 0===t?void 0:t.bank.send;if(c){var i=c.to_address,l=c.amount[0],u=l.amount,m=l.denom;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a),r.a.createElement("td",null,u," ",r.a.createElement("small",{className:"font-weight-bold"},m.toUpperCase())),r.a.createElement("td",null,i,r.a.createElement("div",{className:"font-italic"},"Votes:"," ",r.a.createElement("span",{className:"font-weight-bold"},r.a.createElement(k,{id:a})))),r.a.createElement("td",null,r.a.createElement("span",{className:"text-capitalize"},o)),r.a.createElement("td",null,r.a.createElement(A,{id:a,status:o,handler:n})))}})))),r.a.createElement("nav",null,r.a.createElement("ul",{className:"pagination"},r.a.createElement("li",{className:"page-item"},r.a.createElement("button",{className:"btn btn-link",onClick:a},"Next")))))}var N=a(26),P=a(37),R=a(77),j=a.n(R);function D(e){var t=e.createTransfer,a=Object(n.useState)(),s=Object(m.a)(a,2),o=s[0],c=s[1],i=j()((function(e){return c(Object(P.a)(Object(P.a)({},o),e))}),500,{trailing:!0}),l=function(e){e.persist(),i(Object(N.a)({},e.target.name,e.target.value))};return r.a.createElement("div",{className:"mt-3"},r.a.createElement("h5",null,"Create Transfer"),r.a.createElement("form",{className:"mt-4 flex-form",onSubmit:function(e){e.preventDefault(),t(o)}},r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"Title")),r.a.createElement("input",{name:"title",className:"form-group form-control mb-0",type:"text",placeholder:"Proposal title",onChange:l})),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"Description")),r.a.createElement("textarea",{name:"description",className:"form-group form-control mb-0 fullwidth",type:"text",placeholder:"Proposal description",onChange:l})),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"Orai")),r.a.createElement("input",{name:"amount",className:"form-group form-control mb-0",type:"number",placeholder:"eg: 1.5",onChange:l})),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"To")),r.a.createElement("input",{name:"to",className:"form-group form-control mb-0 w-75",type:"text",placeholder:"orai123xxx...",onChange:l})),r.a.createElement("button",{className:"btn btn-info mt-1 float-right"},"Submit Transfer")))}function q(e){e.approvers,e.quorum;return r.a.createElement("div",{className:"w-100"},r.a.createElement("div",{style:{display:"flex",alignItems:"center"},className:"mt-3"},r.a.createElement("div",{style:{fontWeight:500,lineHeight:1.2,fontSize:"1.25rem"}},"MultiSig Address:"," "),r.a.createElement("div",{style:{marginLeft:4}},"orai1gkr56hlnx9vc7vncln2dkd896zfsqjn300kfq0")))}function K(e){var t=e.approvers,a=e.quorum,n=e.transfers,s=e.createTransfer,o=e.nextTransfers,c=e.approveTransfer;return r.a.createElement("div",{className:"mx-3 my-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-5 "},r.a.createElement(q,null))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-5 "},r.a.createElement(v,{approvers:t,quorum:a})),r.a.createElement("div",{className:"col-lg-7"},r.a.createElement(D,{createTransfer:s}))),r.a.createElement("hr",{className:"border-info border w-100 border-4"}),r.a.createElement(C,{transfers:n,nextTransfers:o,approveTransfer:c}))}var L=a(78),W=a.n(L);function M(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],s=t[1],o=Object(n.useState)([]),i=Object(m.a)(o,2),p=i[0],f=i[1],v=Object(n.useState)([]),E=Object(m.a)(v,2),h=E[0],b=E[1],g=Object(n.useState)(!0),_=Object(m.a)(g,2),O=_[0],x=_[1],y=Object(n.useState)(0),w=Object(m.a)(y,2),S=w[0],k=w[1];Object(n.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.query("orai1hg78f3elah892s8q79trjmj49se34xnthdve7t",{list_members:{}});case 2:return t=e.sent,a=t.data,f(null===a||void 0===a?void 0:a.members),e.next=7,T.query("orai1gkr56hlnx9vc7vncln2dkd896zfsqjn300kfq0",{threshold:{}});case 7:n=e.sent,r=n.data,b(r),x(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.query("orai1gkr56hlnx9vc7vncln2dkd896zfsqjn300kfq0",{list_proposals:{limit:10}});case 2:t=e.sent,a=t.data,s(null===a||void 0===a?void 0:a.proposals),x(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[S]);var A=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.query("orai1gkr56hlnx9vc7vncln2dkd896zfsqjn300kfq0",{list_proposals:{limit:10,start_after:null===(t=a.slice(-1)[0])||void 0===t?void 0:t.id}});case 2:n=e.sent,r=n.data,s([].concat(Object(c.a)(a),Object(c.a)(null===r||void 0===r?void 0:r.proposals)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,n=t.description,r=t.to,s=t.amount,e.prev=1,x(!0),e.next=5,T.execute("orai1gkr56hlnx9vc7vncln2dkd896zfsqjn300kfq0",{propose:{title:a,description:n,msgs:[{bank:{send:{to_address:r,from_address:"orai1gkr56hlnx9vc7vncln2dkd896zfsqjn300kfq0",amount:[{denom:"orai",amount:new W.a(s).multipliedBy(1e6).toString()}]}}}]}},{gas:5e7});case 5:k(S+1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.message),x(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.id,n=t.type,e.prev=1,x(!0),e.t0=n,e.next="execute"===e.t0?6:"vote"===e.t0?9:12;break;case 6:return e.next=8,T.execute("orai1gkr56hlnx9vc7vncln2dkd896zfsqjn300kfq0",{execute:{proposal_id:a}});case 8:return e.abrupt("break",12);case 9:return e.next=11,T.execute("orai1gkr56hlnx9vc7vncln2dkd896zfsqjn300kfq0",{vote:{proposal_id:a,vote:"yes"}},{gas:4e6});case 11:return e.abrupt("break",12);case 12:k(S+1),e.next=19;break;case 15:e.prev=15,e.t1=e.catch(1),alert(e.t1.message),x(!1);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return!0===O?r.a.createElement("div",{className:"container text-center"},"Loading..."):r.a.createElement("div",{className:"mx-5"},r.a.createElement(d,null),r.a.createElement(K,{approvers:p,quorum:h,transfers:a,approveTransfer:N,createTransfer:C,nextTransfers:A}))}o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root"))},79:function(e,t,a){e.exports=a(161)},85:function(e,t,a){},96:function(e,t){},98:function(e,t){}},[[79,1,2]]]);
//# sourceMappingURL=main.d34e716b.chunk.js.map